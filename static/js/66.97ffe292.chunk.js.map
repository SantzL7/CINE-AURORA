{"version":3,"file":"static/js/66.97ffe292.chunk.js","mappings":"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","sources":["pages/Login.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { useNavigate } from 'react-router-dom';\n\n// Função para validar força da senha\nconst validatePassword = password => {\n  const minLength = 8;\n  const hasUpperCase = /[A-Z]/.test(password);\n  const hasLowerCase = /[a-z]/.test(password);\n  const hasNumbers = /\\d/.test(password);\n  const hasSpecialChar = /[!@#$%^&*(),.?\":{}|<>]/.test(password);\n\n  return {\n    isValid:\n      password.length >= minLength && hasUpperCase && hasLowerCase && hasNumbers && hasSpecialChar,\n    requirements: {\n      minLength: password.length >= minLength,\n      hasUpperCase,\n      hasLowerCase,\n      hasNumbers,\n      hasSpecialChar\n    }\n  };\n};\n\nexport default function Login() {\n  const { login, signup } = useAuth();\n  const navigate = useNavigate();\n  const [mode, setMode] = useState('login');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [err, setErr] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [failedAttempts, setFailedAttempts] = useState(0);\n  const [isLocked, setIsLocked] = useState(false);\n  const [lockTime, setLockTime] = useState(0);\n\n  // Efeito para controlar o tempo de bloqueio\n  useEffect(() => {\n    let timer;\n    if (isLocked && lockTime > 0) {\n      timer = setTimeout(() => {\n        setLockTime(prev => prev - 1);\n      }, 1000);\n    } else if (isLocked && lockTime === 0) {\n      setIsLocked(false);\n      setFailedAttempts(0);\n    }\n    return () => clearTimeout(timer);\n  }, [isLocked, lockTime]);\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n\n    if (isSubmitting || isLocked) return;\n\n    // Validação básica de email\n    if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)) {\n      setErr('Por favor, insira um email válido');\n      return;\n    }\n\n    // Validação de senha para cadastro\n    if (mode === 'signup') {\n      const passwordValidation = validatePassword(password);\n      if (!passwordValidation.isValid) {\n        setErr('A senha não atende aos requisitos de segurança');\n        return;\n      }\n    }\n\n    setErr('');\n    setIsSubmitting(true);\n\n    try {\n      if (mode === 'login') {\n        await login(email, password);\n      } else {\n        await signup(email, password);\n      }\n\n      // Redirecionamento seguro após login bem-sucedido\n      const adminEmail = 'matheus0mendes0marinho@gmail.com';\n      if (email === adminEmail) {\n        navigate('/admin', { replace: true });\n      } else {\n        navigate('/app', { replace: true });\n      }\n\n      // Resetar tentativas após login bem-sucedido\n      setFailedAttempts(0);\n    } catch (error) {\n      // Mensagens de erro mais amigáveis\n      let errorMessage = 'Ocorreu um erro ao fazer login';\n\n      switch (error.code) {\n        case 'auth/user-not-found':\n        case 'auth/wrong-password':\n          errorMessage = 'Email ou senha incorretos';\n          const attempts = failedAttempts + 1;\n          setFailedAttempts(attempts);\n\n          // Bloquear após 5 tentativas por 5 minutos\n          if (attempts >= 5) {\n            setIsLocked(true);\n            setLockTime(300); // 5 minutos em segundos\n            errorMessage = 'Muitas tentativas. Tente novamente em 5 minutos.';\n          }\n          break;\n        case 'auth/email-already-in-use':\n          errorMessage = 'Este email já está em uso';\n          break;\n        case 'auth/weak-password':\n          errorMessage = 'A senha é muito fraca';\n          break;\n        case 'auth/too-many-requests':\n          errorMessage = 'Muitas tentativas. Tente novamente mais tarde.';\n          break;\n        default:\n          // Log unexpected error code for debugging\n          console.warn('Unhandled auth error:', error.code);\n          errorMessage = 'Ocorreu um erro inesperado. Por favor, tente novamente.';\n      }\n\n      setErr(errorMessage);\n    } finally {\n      setIsSubmitting(false);\n    }\n  }\n\n  return (\n    <div className=\"auth-container\">\n      <form className=\"auth-card\" onSubmit={handleSubmit}>\n        <h1>Cine Aurora</h1>\n        <p className=\"muted\">Entre com sua conta ou cadastre-se</p>\n\n        {err && <div className=\"error\">{err}</div>}\n\n        <div className=\"form-group\">\n          <input\n            type=\"email\"\n            placeholder=\"Email\"\n            value={email}\n            onChange={e => setEmail(e.target.value.trim())}\n            required\n            className=\"input\"\n            disabled={isLocked || isSubmitting}\n            autoComplete=\"username\"\n          />\n        </div>\n        <div className=\"form-group\">\n          <input\n            type=\"password\"\n            placeholder=\"Senha\"\n            value={password}\n            onChange={e => setPassword(e.target.value)}\n            required\n            className=\"input\"\n            disabled={isLocked || isSubmitting}\n            autoComplete={mode === 'login' ? 'current-password' : 'new-password'}\n            minLength={mode === 'signup' ? '8' : undefined}\n          />\n          {mode === 'signup' && (\n            <div className=\"password-requirements\">\n              <p className=\"small muted\">A senha deve conter:</p>\n              <ul className=\"requirement-list\">\n                <li className={password.length >= 8 ? 'valid' : ''}>Mínimo de 8 caracteres</li>\n                <li className={/[A-Z]/.test(password) ? 'valid' : ''}>\n                  Pelo menos uma letra maiúscula\n                </li>\n                <li className={/[a-z]/.test(password) ? 'valid' : ''}>\n                  Pelo menos uma letra minúscula\n                </li>\n                <li className={/\\d/.test(password) ? 'valid' : ''}>Pelo menos um número</li>\n                <li className={/[!@#$%^&*(),.?\":{}|<>]/.test(password) ? 'valid' : ''}>\n                  Pelo menos um caractere especial\n                </li>\n              </ul>\n            </div>\n          )}\n        </div>\n\n        <button type=\"submit\" className=\"btn primary\" disabled={isSubmitting || isLocked}>\n          {isSubmitting ? (\n            <span className=\"spinner\">Carregando...</span>\n          ) : isLocked ? (\n            `Tente novamente em ${Math.floor(lockTime / 60)}:${(lockTime % 60).toString().padStart(2, '0')}`\n          ) : mode === 'login' ? (\n            'Entrar'\n          ) : (\n            'Cadastrar'\n          )}\n        </button>\n\n        <button\n          type=\"button\"\n          className=\"btn ghost\"\n          onClick={() => {\n            setMode(mode === 'login' ? 'signup' : 'login');\n            setErr('');\n          }}\n          disabled={isSubmitting || isLocked}\n        >\n          {mode === 'login' ? 'Criar uma conta' : 'Já tenho conta'}\n        </button>\n      </form>\n    </div>\n  );\n}\n"],"names":["validatePassword","password","hasUpperCase","test","hasLowerCase","hasNumbers","hasSpecialChar","isValid","length","requirements","minLength","Login","login","signup","useAuth","navigate","useNavigate","mode","setMode","useState","email","setEmail","setPassword","err","setErr","isSubmitting","setIsSubmitting","failedAttempts","setFailedAttempts","isLocked","setIsLocked","lockTime","setLockTime","useEffect","timer","setTimeout","prev","clearTimeout","_jsx","className","children","_jsxs","onSubmit","async","e","preventDefault","replace","error","errorMessage","code","attempts","console","warn","type","placeholder","value","onChange","target","trim","required","disabled","autoComplete","undefined","concat","Math","floor","toString","padStart","onClick"],"ignoreList":[],"sourceRoot":""}