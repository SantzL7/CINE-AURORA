"use strict";(self.webpackChunkcine_aurora=self.webpackChunkcine_aurora||[]).push([[612],{612:(e,a,s)=>{s.r(a),s.d(a,{default:()=>d});var n=s(555),i=s(43),t=s(163),r=s(667),l=s(441),o=s(840),c=s(579);function d(){const{id:e}=(0,t.g)(),a=(0,t.Zp)(),[d,m]=(0,i.useState)(null),[u,b]=(0,i.useState)(1),[p,h]=(0,i.useState)(1),[v,x]=(0,i.useState)(""),[N,j]=(0,i.useState)(""),[g,y]=(0,i.useState)(!1),[_,k]=(0,i.useState)([]);return(0,i.useEffect)(()=>{e&&async function(){try{const a=await Promise.resolve().then(s.bind(s,667)).then(a=>{let{getDoc:s}=a;return s((0,r.H9)(l.db,"series",e))});a.exists()&&m((0,n.A)({id:a.id},a.data()));const i=(0,r.rJ)(l.db,"series",e,"episodes"),t=(await(0,r.GG)(i)).docs.map(e=>(0,n.A)({id:e.id},e.data()));t.sort((e,a)=>e.seasonNumber===a.seasonNumber?(e.episodeNumber||0)-(a.episodeNumber||0):e.seasonNumber-a.seasonNumber),k(t)}catch(a){console.error(a)}}()},[e]),(0,c.jsxs)("div",{className:"admin-page",children:[(0,c.jsx)(o.A,{}),(0,c.jsxs)("main",{className:"content",style:{maxWidth:960,margin:"0 auto"},children:[(0,c.jsxs)("div",{className:"auth-card",style:{maxWidth:"100%",marginTop:24},children:[(0,c.jsx)("button",{className:"btn",onClick:()=>a("/admin"),style:{marginBottom:8},children:"Voltar para Admin"}),(0,c.jsxs)("h1",{style:{marginBottom:4},children:[d?d.title:"S\xe9rie"," - Epis\xf3dios"]}),(0,c.jsxs)("form",{onSubmit:async function(a){if(a.preventDefault(),v&&N){y(!0);try{const a=String(u),s=(0,r.rJ)(l.db,"series",e,"episodes"),n=await(0,r.gS)(s,{episodeNumber:Number(p),seasonNumber:Number(u),title:v,videoUrl:N,createdAt:new Date});x(""),j(""),h(e=>Number(e)+1),k(e=>{const s=[...e,{id:n.id,seasonId:a,seasonNumber:Number(a),episodeNumber:Number(p),title:v,videoUrl:N}];return s.sort((e,a)=>e.seasonNumber===a.seasonNumber?(e.episodeNumber||0)-(a.episodeNumber||0):e.seasonNumber-a.seasonNumber),s})}catch(s){console.error(s),alert("Erro ao adicionar epis\xf3dio. Verifique as regras do Firestore.")}finally{y(!1)}}},style:{display:"grid",gap:12,marginTop:12},children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{children:"Temporada"}),(0,c.jsx)("input",{className:"input",type:"number",min:1,value:u,onChange:e=>b(Number(e.target.value)||1)})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{children:"N\xfamero do epis\xf3dio"}),(0,c.jsx)("input",{className:"input",type:"number",min:1,value:p,onChange:e=>h(Number(e.target.value)||1)})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{children:"T\xedtulo do epis\xf3dio"}),(0,c.jsx)("input",{className:"input",value:v,onChange:e=>x(e.target.value)})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{children:"URL do v\xeddeo do epis\xf3dio"}),(0,c.jsx)("input",{className:"input",value:N,onChange:e=>j(e.target.value),placeholder:"https://..."})]}),(0,c.jsx)("button",{type:"submit",className:"btn primary",disabled:g,children:g?"Salvando...":"Adicionar epis\xf3dio"})]})]}),(0,c.jsxs)("section",{style:{marginTop:24},children:[(0,c.jsx)("h2",{style:{marginBottom:8},children:"Epis\xf3dios cadastrados"}),0===_.length&&(0,c.jsx)("div",{children:"Sem epis\xf3dios ainda."}),_.length>0&&(0,c.jsx)("div",{style:{display:"grid",gap:8},children:_.map(e=>(0,c.jsx)("div",{className:"auth-card",style:{maxWidth:"100%",padding:"8px 12px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{style:{fontWeight:600},children:["T",e.seasonNumber||1,"E",e.episodeNumber||"?"," -"," ",e.title||"(sem t\xedtulo)"]}),(0,c.jsx)("div",{style:{opacity:.7,fontSize:"0.85rem"},children:e.videoUrl})]})},"".concat(e.seasonId,"-").concat(e.id)))})]})]})]})}},840:(e,a,s)=>{s.d(a,{A:()=>l});var n=s(43),i=s(163),t=s(729),r=s(579);function l(){const[e,a]=(0,n.useState)(!1),[s,l]=(0,n.useState)(!1),o=(0,i.Zp)(),c=(0,i.zy)(),{currentUser:d,logout:m}=(0,t.A)();async function u(){try{await m(),o("/login",{replace:!0})}catch(e){console.error(e)}}(0,n.useEffect)(()=>{function e(){a(window.scrollY>10)}return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,n.useEffect)(()=>{l(!1)},[c]);const b=e=>{o(e),l(!1)};return(0,r.jsxs)("header",{className:"navbar".concat(e?" navbar--scrolled":""),children:[(0,r.jsxs)("div",{className:"navbar__brand",onClick:()=>b("/app"),style:{cursor:"pointer",display:"flex",alignItems:"center",gap:"10px"},children:[(0,r.jsx)("img",{src:"/logo192.png",alt:"Logo CineAurora",style:{height:"40px",width:"auto"}}),(0,r.jsx)("span",{style:{fontWeight:"bold",fontSize:"1.2rem"},children:"CineAurora"})]}),(0,r.jsxs)("nav",{className:"navbar__nav",children:[(0,r.jsx)("button",{className:"navbar__link".concat("/app"!==c.pathname||c.search?"":" navbar__link--active"),onClick:()=>o("/app"),children:"Home"}),(0,r.jsx)("button",{className:"navbar__link".concat("?type=movie"===c.search?" navbar__link--active":""),onClick:()=>o("/app?type=movie"),children:"Filmes"}),(0,r.jsx)("button",{className:"navbar__link".concat("?type=series"===c.search?" navbar__link--active":""),onClick:()=>o("/app?type=series"),children:"S\xe9ries"}),(0,r.jsx)("button",{className:"navbar__link".concat("/my-list"===c.pathname?" navbar__link--active":""),onClick:()=>o("/my-list"),children:"Minha lista"})]}),(0,r.jsxs)("div",{className:"navbar__right",children:["matheus0mendes0marinho@gmail.com"===(null===d||void 0===d?void 0:d.email)&&(0,r.jsx)("button",{className:"btn",type:"button",onClick:()=>o("/admin"),children:"Admin"}),(0,r.jsx)("button",{className:"navbar__icon","aria-label":"Buscar",onClick:()=>o("/search"),children:"\ud83d\udd0d"}),(0,r.jsx)("button",{className:"btn",onClick:u,children:"Sair"})]}),(0,r.jsxs)("button",{className:"navbar__mobile-toggle ".concat(s?"open":""),onClick:()=>l(!s),"aria-label":"Menu",children:[(0,r.jsx)("span",{}),(0,r.jsx)("span",{}),(0,r.jsx)("span",{})]}),(0,r.jsxs)("div",{className:"navbar__mobile-menu ".concat(s?"open":""),children:[(0,r.jsx)("button",{className:"navbar__mobile-link",onClick:()=>b("/app"),children:"Home"}),(0,r.jsx)("button",{className:"navbar__mobile-link",onClick:()=>b("/app?type=movie"),children:"Filmes"}),(0,r.jsx)("button",{className:"navbar__mobile-link",onClick:()=>b("/app?type=series"),children:"S\xe9ries"}),(0,r.jsx)("button",{className:"navbar__mobile-link",onClick:()=>b("/my-list"),children:"Minha lista"}),"matheus0mendes0marinho@gmail.com"===(null===d||void 0===d?void 0:d.email)&&(0,r.jsx)("button",{className:"navbar__mobile-link",onClick:()=>b("/admin"),children:"Admin"}),(0,r.jsx)("button",{className:"navbar__mobile-link",onClick:()=>{u(),l(!1)},style:{color:"#ef4444"},children:"Sair"})]})]})}}}]);
//# sourceMappingURL=612.a4b20787.chunk.js.map